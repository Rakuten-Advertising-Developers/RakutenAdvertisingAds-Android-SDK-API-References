<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Overview (sdk 1.0.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="package index">
<meta name="generator" content="javadoc/PackageIndexWriter">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript" src="script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="script-dir/jquery-ui.js"></script>
</head>
<body class="package-index">
<script type="text/javascript">var pathtoroot = "./";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<div class="header">
<h1 class="title">sdk 1.0.0 API</h1>
</div>
<div class="contentContainer">
<div class="block"><h1 id="rakutenadvertisingadsmobileandroidsdk">RakutenAdvertisingAds Mobile Android SDK</h1>

<p>Get started with RakutenAdvertisingAds SDK by creating a fork from git repo  https://github.com/Rakuten-Advertising-Developers/RakutenAdvertisingAds-Android-SDK.git</p>

<h2 id="tools">Tools</h2>

<p>Android Studio - https://developer.android.com/studio/</p>

<h2 id="buildingthedemoapp">Building the Demo App</h2>

<p>Build RakutenAdvertisingAds SDK from source code. After cloning the forked repo, open the project within Android Studio.
    /path/to/repo/RakutenAdvertisingAds (Opening from this folder is important for loading the project structure properly).
    In the right hand corner make sure that API1.0Demo is Run/Debug dialog.
    Make sure that an emulator is selected in the dialog to the right of the Run/Debug dialog.
    If you don't have an emulator configured visit this link - https://developer.android.com/studio/run/managing-avds
    Once you have your IDE properly configured press the green Play button to run the DemoApp.</p>

<h2 id="integration">Integration</h2>

<p>add "implementation "io.rakutenadvertising:ads:0.0.1" to dependencies section in your build.gradle file </p>

<pre><code class="groovy language-groovy">dependencies {
    //...
    implementation "io.rakutenadvertising:ads:0.0.1"
    //...
}
</code></pre>

<h3 id="setup">Setup</h3>

<p>Import required classes in files where you would like to use SDK</p>

<pre><code class="kotlin language-kotlin">    import com.rakuten.rmp.mobile.RakutenAdvertisingAds
    import com.rakuten.rmp.mobile.TargetingParams
    import com.rakuten.rmp.mobile.openrtb.request.AdvertisingIDFetcher
</code></pre>

<p>Then you need to set end point url to RakutenAdvertisingAds class. </p>

<pre><code class="kotlin language-kotlin">   RakutenAdvertisingAds.setHost(
           Host("...end point url...")
   )
</code></pre>

<p>and android application context </p>

<pre><code class="kotlin language-kotlin">   RakutenAdvertisingAds.setApplicationContext(
           requireContext().applicationContext
   )
</code></pre>

<h3 id="androidadvertisingidentifieraaid">Android Advertising Identifier(AAID)</h3>

<p>To use Android advertiser id you need to add google ads sdk to project's gradle dependencies</p>

<pre><code class="groovy language-groovy">dependencies {
    //...
    implementation 'com.google.android.gms:play-services-ads:19.2.0'
    //...
}
</code></pre>

<p>Then you can get AAID using AdvertisingIDFetcher class </p>

<pre><code class="kotlin language-kotlin">  val fetcher = AdvertisingIDFetcher(context)
  val adId = fetcher.call()
</code></pre>

<p>Please make sure that <code>fetcher.call()</code> method is called from background thread. Otherwise exception will be thrown. </p>

<p>Then you set AAID to TargetingParams's setAaid() method</p>

<pre><code class="kotlin language-kotlin"> TargetingParams.setAaid(adId)
</code></pre>

<h3 id="geodata">Geo data</h3>

<p>To show user more relevant ad you can also provide location to TargetingParams.
    If don't have an experience working with geo location on Android please read this article first - https://developer.android.com/training/location. </p>

<p>After you obtain android Location class instance you set it to TargetingParams class.</p>

<pre><code class="kotlin language-kotlin">    TargetingParams.setLocation(location)
</code></pre>

<h3 id="logging">Logging</h3>

<p>For debugging purpose you can provide custom Logger to LogUtil class.
    To do so you need to implement com.rakuten.rmp.mobile.Logger interface and call LogUtil.setCustomLogger() method </p>

<pre><code class="kotlin language-kotlin">    LogUtil.setCustomLogger(logger)
</code></pre>

<h3 id="gdpr">GDPR</h3>

<p>SDK receives consent string and GDPR using status from app's default SharedPreferences instance.
    On each ad request SDK tries to obtain needed values by keys IABTCF<em>TCString and IABTCF</em>gdprApplies specified in CMP v2.
    If those keys are now available sdk will check on IABConsent<em>ConsentString and IABConsent</em>SubjectToGDPR presuming the app is still using CMP v1</p>

<p>It's highly recommended to read this doc for more detailed implementation details:
    https://github.com/InteractiveAdvertisingBureau/GDPR-Transparency-and-Consent-Framework/blob/master/TCFv2/IAB%20Tech%20Lab%20-%20CMP%20API%20v2.md#in-app-details</p>

<p>As an additional option you can manually turn GDPR location masking on:</p>

<pre><code class="kotlin language-kotlin">    TargetingParams.setGDPRMasking(true)
</code></pre>

<h2 id="adformats">Ad Formats</h2>

<p>There are two Ad formats available at the moment: Banner Ad  and Banner Ad.
    Create an ad unit first. You will need this ID later to request ads from RSSP server.</p>

<pre><code class="kotlin language-kotlin">    val gapBannerAdUnitId = "55"//for example
    val gapNativeAdUnitId = "55"
</code></pre>

<h3 id="bannerad">Banner Ad</h3>

<p>1) Create and init BannerAd class instance.</p>

<pre><code class="kotlin language-kotlin">    val bannerAd = BannerAd(requireActivity(), gapBannerAdUnitId, 300, 250)
    bannerAd!!.setAutoRefreshPeriodMillis(30000)// 30 sec
    bannerAd!!.setAdListener(object : AdListener {
    })
</code></pre>

<p>2) Create BannerAdViewBinder instance using BannerAdViewBinder.Builder class.
    You need to provide layout containing WebView, and this WebView id.</p>

<pre><code class="kotlin language-kotlin">    val adViewBinder = BannerAdViewBinder.Builder(R.layout.webview_layout)
        .bindBannerWebView(R.id.hybridWebView)
</code></pre>

<p>webview_layout.xml</p>

<pre><code class="xml language-xml">&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent" android:layout_height="match_parent"
        android:orientation="vertical"&gt;

   &lt;WebView android:id="@+id/hybridWebView" android:layout_width="300dp"
           android:layout_height="250dp" android:layout_gravity="center" /&gt;
&lt;/LinearLayout&gt;
</code></pre>

<p>3) Set adViewBinder to bannerAd instance.</p>

<pre><code class="kotlin language-kotlin">    bannerAd!!.registerViewBinder(adViewBinder)
    bannerAd!!.loadAd()
</code></pre>

<p>4) After ad loaded from server onAdLoaded() method of AdListener will be called with AdUnit        object, which can be used to render ad view.</p>

<pre><code class="kotlin language-kotlin">    override fun onAdLoaded(adUnit: AdUnit?) {
                val view = bannerAd!!.renderAdView(adUnit)
                // add 'view' on your screen
            }
</code></pre>

<h3 id="nativead">Native Ad</h3>

<p>1) Add NativeAd object</p>

<pre><code class="kotlin language-kotlin">    val nativeAd = NativeAd(requireActivity(), gapNativeAdUnitId)
</code></pre>

<p>2) Create and init native Ad request object</p>

<pre><code class="kotlin language-kotlin">    val nativeAdRequest = Native()

    nativeAdRequest.setTitle(60) //max length of title string
    nativeAdRequest.setSummary(119) //max length of summary string
    nativeAdRequest.setMainImg(600, 500) //desired size of main image

    nativeAd.setAutoRefreshPeriodMillis(30000) //30 sec
    nativeAd.setAdListener(object : AdListener {

    })
</code></pre>

<p>3) Create and init NativeAdViewBinder object</p>

<pre><code class="kotlin language-kotlin">     val viewBinder = NativeAdViewBinder.Builder(R.layout.native_layout)// native ad layout
            .bindTitle(R.id.native_title) // title text view id
            .bindSummary(R.id.summary)  // summary text view id
            .bindIconImage(R.id.icon_image) // icon image view id
            .bindMainImage(R.id.main_image) // main image view id
            .bindPromotedBy(R.id.promoted_by)  // icon text view id
        nativeAd.registerViewBinder(viewBinder)
        nativeAd.loadAd(nativeAdRequest)
</code></pre>

<p>native_layout.xml:</p>

<pre><code class="xml language-xml">    &lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:background="@android:color/black"
        android:padding="16dp"&gt;

        &lt;LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal"&gt;

            &lt;ImageView
                android:id="@+id/icon_image"
                android:layout_width="50dp"
                android:layout_height="50dp" /&gt;

            &lt;TextView
                android:id="@+id/native_title"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textColor="@android:color/white" /&gt;
        &lt;/LinearLayout&gt;

        &lt;FrameLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"&gt;

            &lt;ImageView
                android:id="@+id/main_image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" /&gt;
        &lt;/FrameLayout&gt;

        &lt;TextView
            android:id="@+id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@android:color/white" /&gt;

        &lt;TextView
            android:id="@+id/promoted_by"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@android:color/white" /&gt;

        &lt;TextView
            android:id="@+id/cta"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@android:color/white" /&gt;
    &lt;/LinearLayout&gt;
</code></pre>

<p>4) After native ad is loaded onAdLoaded() method of AdListener will be called.</p>

<pre><code class="kotlin language-kotlin">    override fun onAdLoaded(nativeAdUnit: AdUnit) {
        nativeAdUnit as NativeAdUnit // cast AdUnit to NativeAdUnit

        val nativeAdView = nativeAd.renderAdView(nativeAdUnit) //render native Ad view

        val imageView: ImageView = nativeAdView.findViewById(R.id.main_image)
        imageView.setImageDrawable(nativeAdUnit.mainImgDrawable) // load main image

        val iconImageView: ImageView = nativeAdView.findViewById(R.id.icon_image)
        iconImageView.setImageDrawable(nativeAdUnit.iconDrawable) // load icon image

        // add 'view' on your screen
    }
</code></pre>

<p>5) Process onAdClicked() event.</p>

<pre><code class="kotlin language-kotlin">    override fun onAdClicked(nativeAdUnit: AdUnit) {
        nativeAdUnit as NativeAdUnit// cast AdUnit to NativeAdUnit

        val browser = WebView(requireActivity())
        browser.webViewClient = object : WebViewClient() {
            override fun shouldOverrideUrlLoading(
                view: WebView,
                url: String
            ): Boolean {
                val intent = Intent(Intent.ACTION_VIEW, Uri.parse(url))
                intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK
                startActivity(intent)
                return true
            }
        }
        browser.settings.javaScriptEnabled = true
        browser.loadUrl(nativeAdUnit.callToAction)
    }
</code></pre>

<h3 id="hybridad">Hybrid Ad</h3>

<p>1) Create HybridAd object</p>

<pre><code class="kotlin language-kotlin">    val hybridAd = HybridAd(getApplication(), adUnitId)
</code></pre>

<p>2) Create NativeAuctionType object.</p>

<pre><code class="kotlin language-kotlin">     private fun createNativeAdRequest(hybridAd: HybridAd): NativeAuctionType {
        val nativeAdRequest = Native()
        //...
        return NativeAuctionType(nativeAdRequest)
    }
</code></pre>

<p>Please take a look on instructions how to create <code>Native</code> request and  <code>NativeAdViewBinder</code> objects above.</p>

<p>3) Create  BannerAuctionType object</p>

<pre><code class="kotlin language-kotlin">    private fun createBannerAuction() = BannerAuctionType(300, 250)
</code></pre>

<p>4) Set auction types to <code>hybridAd</code></p>

<pre><code class="kotlin language-kotlin">    hybridAd.addSupportedAuctionType(createNativeAdRequest(hybridAd))
    hybridAd.addSupportedAuctionType(createBannerAuction())
</code></pre>

<p>5) <code>onAdClicked</code> event has some pifall at the moment. For Banner ad it's handles automatically,
    but for Native ad you need to handle it by hands.</p>

<pre><code class="kotlin language-kotlin">    override fun onAdClicked(adUnit: AdUnit) {
        //...
        (adUnit as? NativeAdUnit)?.let {
            handleNativeAdClick(activity, it)
        }
    }
</code></pre>

<p>6) Example of <code>handleNativeAdClick()</code> method</p>

<pre><code class="kotlin language-kotlin">    fun handleNativeAdClick(activity: Activity,
                               nativeAdUnit: NativeAdUnit){
        val browser = WebView(activity)
           browser.webViewClient = object : WebViewClient() {
            override fun shouldOverrideUrlLoading(
                view: WebView,
                url: String
           ): Boolean {
            val intent = Intent(Intent.ACTION_VIEW, Uri.parse(url))
            intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK
            activity.startActivity(intent)
            return true
               }
             }
          browser.settings.javaScriptEnabled = true
          browser.loadUrl(nativeAdUnit.callToAction)
}
</code></pre>

<p>7) Call <code>loadAd()</code> method</p>

<pre><code class="kotlin language-kotlin">    hybridAd.loadAd()
</code></pre>

<h2 id="testradpublisherdemoapp">Test RadPublisher Demo app</h2>

<p>You can clone and build publisher demo application from
    https://github.com/Rakuten-Advertising-Developers/radpublisher-demo-android.git</p>

<p>It contains brief examples of using Banner and Native ads. </p></div>
</div>
<div class="contentContainer">
<div class="overviewSummary">
<table>
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/package-summary.html">com.rakuten.rmp.mobile</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i1">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/adpositions/package-summary.html">com.rakuten.rmp.mobile.adpositions</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i2">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/auctiontype/package-summary.html">com.rakuten.rmp.mobile.auctiontype</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i3">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/iab/package-summary.html">com.rakuten.rmp.mobile.iab</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i4">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/iab/gdpr/package-summary.html">com.rakuten.rmp.mobile.iab.gdpr</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i5">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/iab/gdpr/decoder/package-summary.html">com.rakuten.rmp.mobile.iab.gdpr.decoder</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i6">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/iab/gdpr/suppliers/package-summary.html">com.rakuten.rmp.mobile.iab.gdpr.suppliers</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i7">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/iab/gdpr/utils/package-summary.html">com.rakuten.rmp.mobile.iab.gdpr.utils</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i8">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/iab/gdpr/v1/package-summary.html">com.rakuten.rmp.mobile.iab.gdpr.v1</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i9">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/iab/gdpr/v2/package-summary.html">com.rakuten.rmp.mobile.iab.gdpr.v2</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i10">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/integrations/package-summary.html">com.rakuten.rmp.mobile.integrations</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i11">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/listeners/package-summary.html">com.rakuten.rmp.mobile.listeners</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i12">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/openrtb/nativead/package-summary.html">com.rakuten.rmp.mobile.openrtb.nativead</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i13">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/openrtb/request/package-summary.html">com.rakuten.rmp.mobile.openrtb.request</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i14">
<th class="colFirst" scope="row"><a href="com/rakuten/rmp/mobile/openrtb/videoad/package-summary.html">com.rakuten.rmp.mobile.openrtb.videoad</a></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</div>
</div>
</body>
</html>
